{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/briancooper/personal/recipes-app/src/Authentication.js\",\n    _s = $RefreshSig$();\n\nimport * as React from \"react\";\nimport { API_KEY, CLIENT_ID, RECIPES_SHEET_ID } from \"./constants\";\nexport function Authentication({\n  loaded\n}) {\n  _s();\n\n  const [isLoggedIn, setIsLoggedIn] = React.useState(false);\n  React.useEffect(() => {\n    const {\n      gapi\n    } = global;\n\n    if (loaded) {\n      new window.google.maps.Map(document.getElementById(\"map\"), {\n        zoom: 12,\n        center: {\n          lat: 37.77493,\n          lng: -122.41942\n        }\n      });\n\n      function updateSigninStatus(isSignedIn) {\n        if (isSignedIn) {\n          setIsLoggedIn(true);\n          getRecipes();\n        } else {\n          setIsLoggedIn(false);\n        }\n      }\n\n      if (gapi) {\n        gapi.load(\"client:auth2\", () => {\n          gapi.client.init({\n            apiKey: API_KEY,\n            clientId: CLIENT_ID,\n            scope: \"https://www.googleapis.com/auth/spreadsheets.readonly\"\n          }).then(function () {\n            // Listen for sign-in state changes.\n            gapi.auth2.getAuthInstance().isSignedIn.listen(updateSigninStatus); // Handle the initial sign-in state.\n\n            updateSigninStatus(gapi.auth2.getAuthInstance().isSignedIn.get());\n          }, function (error) {\n            console.error(JSON.stringify(error, null, 2));\n          });\n        });\n      }\n    }\n  }, [loaded]);\n\n  function handleAuthClick(event) {\n    global.gapi.auth2.getAuthInstance().signIn();\n  }\n\n  function handleSignoutClick(event) {\n    global.gapi.auth2.getAuthInstance().signOut();\n  }\n  /**\n   * Print the contents of the spreadsheet\n   * https://docs.google.com/spreadsheets/d/1mlCIY1G-CW1EfNddv7tjEVJoXCz6TyXLcNfqLdBRkzU/edit#gid=1825319816\n   */\n\n\n  function getRecipes() {\n    global.gapi.client.sheets.spreadsheets.values.get({\n      spreadsheetId: RECIPES_SHEET_ID,\n      range: \"Recipes!A2:L92\"\n    }).then(response => {\n      const recipes = response.result.values;\n\n      if (recipes.length > 0) {\n        global.recipes = recipes;\n      } else {\n        console.error(\"No Data Found\");\n      }\n    }, function (response) {\n      console.error(\"Error: \" + response.result.error.message);\n    });\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: isLoggedIn ? /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleSignoutClick,\n      children: \"LOGOUT\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleAuthClick,\n      children: \"AUTHORIZE WITH GOOGLE ACCOUNT\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 85,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Authentication, \"fKLMlyFH2GMrhNeUDpp+0z1yiCo=\");\n\n_c = Authentication;\n\nvar _c;\n\n$RefreshReg$(_c, \"Authentication\");","map":{"version":3,"sources":["/Users/briancooper/personal/recipes-app/src/Authentication.js"],"names":["React","API_KEY","CLIENT_ID","RECIPES_SHEET_ID","Authentication","loaded","isLoggedIn","setIsLoggedIn","useState","useEffect","gapi","global","window","google","maps","Map","document","getElementById","zoom","center","lat","lng","updateSigninStatus","isSignedIn","getRecipes","load","client","init","apiKey","clientId","scope","then","auth2","getAuthInstance","listen","get","error","console","JSON","stringify","handleAuthClick","event","signIn","handleSignoutClick","signOut","sheets","spreadsheets","values","spreadsheetId","range","response","recipes","result","length","message"],"mappings":"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","sourcesContent":["import * as React from \"react\";\nimport { API_KEY, CLIENT_ID, RECIPES_SHEET_ID } from \"./constants\";\n\nexport function Authentication({ loaded }): React.Node {\n  const [isLoggedIn, setIsLoggedIn] = React.useState(false);\n\n  React.useEffect(() => {\n    const { gapi } = global;\n    if (loaded) {\n      new window.google.maps.Map(document.getElementById(\"map\"), {\n        zoom: 12,\n        center: { lat: 37.77493, lng: -122.41942 },\n      });\n      function updateSigninStatus(isSignedIn) {\n        if (isSignedIn) {\n          setIsLoggedIn(true);\n          getRecipes();\n        } else {\n          setIsLoggedIn(false);\n        }\n      }\n      if (gapi) {\n        gapi.load(\"client:auth2\", () => {\n          gapi.client\n            .init({\n              apiKey: API_KEY,\n              clientId: CLIENT_ID,\n              scope: \"https://www.googleapis.com/auth/spreadsheets.readonly\",\n            })\n            .then(\n              function () {\n                // Listen for sign-in state changes.\n                gapi.auth2\n                  .getAuthInstance()\n                  .isSignedIn.listen(updateSigninStatus);\n\n                // Handle the initial sign-in state.\n                updateSigninStatus(\n                  gapi.auth2.getAuthInstance().isSignedIn.get()\n                );\n              },\n              function (error) {\n                console.error(JSON.stringify(error, null, 2));\n              }\n            );\n        });\n      }\n    }\n  }, [loaded]);\n\n  function handleAuthClick(event) {\n    global.gapi.auth2.getAuthInstance().signIn();\n  }\n\n  function handleSignoutClick(event) {\n    global.gapi.auth2.getAuthInstance().signOut();\n  }\n\n  /**\n   * Print the contents of the spreadsheet\n   * https://docs.google.com/spreadsheets/d/1mlCIY1G-CW1EfNddv7tjEVJoXCz6TyXLcNfqLdBRkzU/edit#gid=1825319816\n   */\n  function getRecipes() {\n    global.gapi.client.sheets.spreadsheets.values\n      .get({\n        spreadsheetId: RECIPES_SHEET_ID,\n        range: \"Recipes!A2:L92\",\n      })\n      .then(\n        (response) => {\n          const recipes = response.result.values;\n          if (recipes.length > 0) {\n            global.recipes = recipes;\n          } else {\n            console.error(\"No Data Found\");\n          }\n        },\n        function (response) {\n          console.error(\"Error: \" + response.result.error.message);\n        }\n      );\n  }\n\n  return (\n    <div>\n      {isLoggedIn ? (\n        <button onClick={handleSignoutClick}>LOGOUT</button>\n      ) : (\n        <button onClick={handleAuthClick}>AUTHORIZE WITH GOOGLE ACCOUNT</button>\n      )}\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}